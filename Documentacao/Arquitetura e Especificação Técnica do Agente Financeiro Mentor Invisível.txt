Arquitetura e Especificação Técnica do Agente Financeiro Mentor Invisível
A evolução dos sistemas de gestão financeira pessoal para ecossistemas agênticos representa uma mudança de paradigma na forma como indivíduos interagem com o capital e o consumo. O projeto Mentor Invisível não se limita a ser uma interface de registro; ele se propõe a ser um nó de inteligência proativa que mitiga o atrito de entrada de dados e combate a inércia cognitiva através de intervenções baseadas em ciência comportamental. A transição de ferramentas passivas para agentes autônomos exige uma infraestrutura que suporte o processamento local de alto desempenho, garantindo a privacidade absoluta exigida por dados financeiros sensíveis, enquanto mantém uma interface de baixíssima fricção via WhatsApp.
Paradigmas da Inteligência Agêntica e Processamento Local
O Mentor Invisível fundamenta-se na premissa de que o controle financeiro tradicional falha devido à alta carga cognitiva exigida do usuário. O modelo de SaaS Agêntico proposto internaliza o custo de processamento através de hardware local, utilizando a GPU NVIDIA GeForce RTX 5080 como o motor central de inferência. Esta escolha técnica não é trivial; a arquitetura Blackwell da NVIDIA oferece núcleos tensores de quinta geração que otimizam operações de precisão reduzida, fundamentais para a execução de Large Language Models (LLMs) e sistemas de transcrição automática como o Whisper.
A eficiência de um agente financeiro local é medida pela latência do primeiro token e pela precisão da extração de entidades. Para um grupo inicial de quatro usuários, a RTX 5080, com seus 16GB de VRAM GDDR7, provê o equilíbrio necessário entre capacidade de memória e largura de banda para sustentar múltiplos fluxos de processamento concorrentes. O desafio técnico reside em manter o modelo de linguagem inteiramente residente na memória de vídeo, evitando o gargalo do barramento PCIe que ocorre quando há transbordamento (spillover) para a memória do sistema (RAM), o que degradaria a performance para níveis inferiores ao processamento em CPU pura.
Benchmarks de Inferência e Seleção de Modelos para a RTX 5080
A seleção do modelo de linguagem é o ponto de decisão mais crítico para a robustez do PRD. Modelos densos e quantizados devem ser avaliados com base em sua capacidade de raciocínio lógico e extração de dados estruturados em formato JSON.
A análise dos dados de benchmark indica que o modelo Qwen 2.5 (7B) oferece a menor latência, sendo ideal para a confirmação imediata de registros via WhatsApp, cumprindo a meta de menos de 5 segundos de tempo total de resposta. No entanto, para a função de "Mentoria", que exige análise de tendências e planejamento de longo prazo, o Mistral Small ou o DeepSeek-R1 apresentam maior capacidade de raciocínio, embora operem próximos ao limite de 16GB da GPU. A estratégia técnica deve envolver o uso de quantização MXFP4 ou INT4 para maximizar a utilização da VRAM sem sacrificar a precisão da extração de entidades financeiras.
Arquitetura de Memória e Cognição Stateful
Diferente de chatbots convencionais que operam em estados efêmeros, o Mentor Invisível requer uma arquitetura de memória persistente que evolui com as interações do usuário. O modelo tradicional de Retrieval-Augmented Generation (RAG) é insuficiente para tarefas agênticas complexas, pois trata cada consulta como um evento isolado. A implementação de uma camada de memória como o Mem0 transforma o sistema em um loop de estado contínuo, onde o agente aprende preferências, reconhece padrões de gastos e mantém a coerência histórica entre sessões.
Transição do RAG Estático para a Memória Agêntica
A arquitetura de memória deve ser estruturada em três camadas distintas para mimetizar a cognição humana e otimizar a recuperação de informações financeiras.
O uso de Grafos de Memória (Memory Graphs) em vez de apenas bancos de vetores permite que o agente estabeleça relações causais. Por exemplo, se um usuário registra uma compra de passagens aéreas, o agente deve conectar esse evento à meta "Viagem Orlando", ajustando automaticamente a barra de progresso e emitindo um alerta de impacto no fluxo de caixa futuro. Este nível de inteligência requer que o sistema execute uma fase de extração e uma fase de atualização (update loop) a cada mensagem recebida, garantindo que fatos obsoletos sejam depreciados ou corrigidos.
Interface de Baixo Atrito e Processamento de Áudio
A interface universal via WhatsApp é o pilar de retenção do Mentor Invisível. O registro via áudio, processado localmente pelo Whisper, elimina a barreira da preguiça de anotar. A integração técnica exige que o backend em FastAPI receba o binário do áudio (.ogg/opus), converta-o para o formato necessário e utilize o Faster-Whisper para transcrição quase instantânea.
A robustez da extração depende da capacidade da LLM em lidar com a linguagem natural ambígua. O processamento deve seguir um fluxo de validação rigoroso para evitar alucinações em valores numéricos, o que seria catastrófico em um contexto financeiro.
Fluxo de Extração de Dados e Tratamento de Exceções
Ao receber o texto transcrito, o agente deve executar um prompt estruturado que retorna um esquema JSON validado por Pydantic. A lógica de extração deve considerar os seguintes metadados: valor, moeda, categoria, método de pagamento e recorrência.
Para garantir 95% de precisão , o sistema deve implementar guardrails de verificação. Se a LLM extrair um valor com baixa confiança ou se o valor for estatisticamente discrepante do histórico do usuário (outlier), o "Mentor" deve intervir com uma pergunta de clarificação em vez de registrar o dado incorretamente. Este comportamento de "degradação controlada" mantém a utilidade do sistema mesmo em condições de incerteza.
Ciência Comportamental e o Motor de Mentoria
O Mentor Invisível diferencia-se de um app de controle de gastos pela sua capacidade de atuar como um arquiteto de escolhas (Choice Architect). O objetivo é utilizar "Nudges" (empurrões) digitais para guiar o usuário em direção a melhores decisões financeiras, sem restringir sua liberdade de escolha.
Implementação de Nudges Financeiros no Fluxo Agêntico
A lógica do mentor deve ser programada para identificar gatilhos psicológicos e intervir no momento exato da transação ou no resumo diário.
Enquadramento de Perda (Loss Aversion): Em vez de dizer "Você gastou R$ 200 em delivery", o agente pode dizer: "Esses R$ 200 em delivery equivalem a 5% da sua meta para a Viagem Orlando. Quer manter esse ritmo?".
Contabilidade Mental (Mental Accounting): O agente ajuda o usuário a segregar o dinheiro em baldes psicológicos, o que comprovadamente reduz gastos em categorias supérfluas.
Combate ao Viés do Presente: O agente utiliza lembretes de metas de longo prazo para mitigar a gratificação instantânea.
Estudos indicam que intervenções baseadas em Nudges podem aumentar as taxas de poupança em até 25% entre millennials. No Mentor Invisível, esses sinais são disparados via Temporal ou agendadores de tarefas que monitoram o desvio entre o orçamento planejado e o executado em tempo real.
Isolamento de Dados e Segurança Multitenant
A privacidade total é um requisito inegociável. Para atender a casais que possuem carteiras individuais e conjuntas, a arquitetura de banco de dados deve utilizar Row-Level Security (RLS) no PostgreSQL. Esta tecnologia permite que a isolação de dados seja forçada pelo próprio kernel do banco de dados, e não apenas pela lógica da aplicação, minimizando o risco de vazamento de informações entre usuários ou inquilinos.
Implementação Técnica de RLS no PostgreSQL
Cada tabela no banco de dados deve incluir uma coluna tenant_id. Ao iniciar uma conexão, o backend define uma variável de sessão que o PostgreSQL utiliza para filtrar automaticamente todos os resultados.
SQL
-- Habilita RLS na tabela de transações
ALTER TABLE transacoes ENABLE ROW LEVEL SECURITY;

-- Cria a política de isolamento baseada no tenant atual
CREATE POLICY transacao_isolation_policy ON transacoes
USING (tenant_id = current_setting('app.current_tenant')::uuid);
Este modelo garante que, mesmo se um desenvolvedor esquecer a cláusula WHERE tenant_id =? em uma query, o banco de dados retornará apenas as linhas permitidas para aquele contexto. Para casais, uma política adicional de compartilhamento pode ser implementada, permitindo acesso a registros onde is_shared = true, mantendo a privacidade das carteiras individuais.
Criptografia e Proteção de Dados em Repouso
Dado o foco em processamento local e privacidade, a criptografia deve ser aplicada de forma transparente. A extensão pgcrypto do PostgreSQL permite a criptografia de campos sensíveis, como nomes de estabelecimentos ou observações pessoais, diretamente nas colunas.
Para a conformidade com a Lei Geral de Proteção de Dados (LGPD) no Brasil, o sistema deve garantir os direitos de acesso, retificação e exclusão dos dados. O processamento na RTX 5080 local é um forte argumento de conformidade, pois os dados brutos nunca saem do perímetro controlado pelo usuário, exceto pelo tráfego criptografado via Meta Business API.
Matriz de Segurança e Conformidade
O uso do Cloudflare Tunnel (cloudflared) permite que o servidor local receba webhooks do WhatsApp sem a necessidade de abrir portas no firewall ou expor IPs públicos estáticos, criando um túnel de saída seguro que é resiliente a ataques de varredura de portas.
Lógica de Negócio: Parcelamentos e Amortizações
Uma funcionalidade essencial solicitada é a divisão automática de compras futuras no fluxo de caixa. O agente deve ser capaz de interpretar frases como "Comprei um iPhone em 12x de 500" e projetar essas parcelas pelos próximos meses. A modelagem matemática para o simulador de amortização utiliza a fórmula de prestações constantes (Tabela Price):
$$PMT = \frac{PV \times i}{1 - (1 + i)^{-n}}$$
Onde $PMT$ é o valor da parcela, $PV$ o valor presente (saldo devedor), $i$ a taxa de juros e $n$ o número de períodos. O Mentor Invisível deve monitorar antecipações de financiamento, sugerindo amortizações quando houver excesso de caixa, calculando a economia de juros reais gerada pela redução do prazo.
Monitoramento, KPIs e Observabilidade Agêntica
Para validar o modelo de SaaS agêntico, o sistema deve monitorar métricas que vão além da disponibilidade tradicional (uptime). A observabilidade deve cobrir a precisão da IA e o engajamento comportamental.
KPIs e Metas de Sucesso do MVP
O monitoramento deve incluir alertas para "deriva de contexto" (contextual drift), onde o agente começa a perder o fio da meada em sessões longas, exigindo o checkpoint do estado da memória. A auditoria de cada decisão da IA deve ser logada em tempo real para permitir a inspeção humana e o ajuste fino (fine-tuning) do "Tom de Voz" do mentor.
Roteiro de Desenvolvimento (Phased Roadmap)
Seguindo as melhores práticas para o desenvolvimento de especificações para agentes de IA, o trabalho deve ser sequenciado em fases testáveis e independentes.
Fase 1: Infraestrutura e Núcleo de Segurança (Semana 1)
O foco inicial é o estabelecimento do ambiente Docker, a configuração do PostgreSQL com as extensões pgcrypto e vector, e a implementação das políticas de RLS. A conectividade externa via Cloudflare Tunnel deve ser validada para garantir que o webhook do WhatsApp funcione com latência mínima.
Fase 2: Motor de Percepção (Semana 2)
Implementação do pipeline de áudio utilizando Faster-Whisper para transcrição local. Integração do vLLM com o modelo Qwen 2.5 (7B), configurando o PagedAttention para suportar múltiplos usuários simultâneos na RTX 5080.
Fase 3: Camada de Memória e Lógica Financeira (Semana 3)
Integração do Mem0 para criar o grafo de memória de longo prazo. Desenvolvimento da lógica de parcelamento automático e projeção de fluxo de caixa futuro. Implementação do simulador de amortização e do motor de metas ("Viagem Orlando").
Fase 4: Inteligência Comportamental e Testes Alpha (Semana 4)
Configuração do agente de "Mentoria" com prompts baseados em Nudge Theory. Início dos testes com os dois casais, monitorando a fricção de entrada e a precisão da categorização automática. Refinamento do tratamento de erros e guardrails de segurança.
Considerações Estratégicas sobre o Futuro do Mentor Invisível
A viabilidade de longo prazo do Mentor Invisível reside na sua capacidade de transformar dados brutos em sabedoria financeira sem exigir esforço do usuário. Enquanto o processamento local na RTX 5080 resolve o problema imediato de custo e privacidade para o grupo inicial, a arquitetura foi desenhada para ser escalável. Se o produto evoluir para um mercado de massa, os microserviços de IA (como NVIDIA NIM) podem ser migrados para a nuvem mantendo a mesma lógica de isolamento de dados via RLS e criptografia de ponta a ponta.
O Mentor Invisível não é apenas uma ferramenta de economia; é uma infraestrutura de suporte à vida financeira que aproveita o auge da computação agêntica de 2025/2026 para devolver ao usuário o recurso mais escasso: o tempo. A integração de modelos de raciocínio profundo, memória stateful e ciência comportamental posiciona este projeto na fronteira do que é tecnicamente possível na computação doméstica de alta performance.
Apêndice Técnico: Detalhes de Integração Meta Business API
Para empresas que operam em setores regulados, a Meta disponibiliza controles avançados de residência de dados. O Mentor Invisível deve ser configurado no portal Meta Developers para utilizar o "Local Storage for data at rest". Uma vez ativado, o conteúdo das mensagens é persistido apenas na região selecionada (Brasil) e excluído dos centros de dados globais após o processamento, atendendo aos requisitos mais rigorosos de privacidade financeira. O fluxo de autenticação do webhook deve obrigatoriamente validar o cabeçalho X-Hub-Signature-256 para garantir que as mensagens recebidas são de fato originadas nos servidores da Meta, prevenindo ataques de personificação ou injeção de dados falsos no balanço financeiro dos usuários.
Este PRD robustecido fornece a base necessária para que a equipe de engenharia e produto execute uma solução de classe mundial, equilibrando agilidade de desenvolvimento com segurança de nível bancário e inteligência comportamental avançada.
